# Zettelkasten MCP Server Configuration

# Directory where notes are stored as markdown files
# Recommend using absolute paths for centralized storage across projects
ZETTELKASTEN_NOTES_DIR=~/.zettelkasten/notes

# SQLite database for indexing and search
ZETTELKASTEN_DATABASE_PATH=~/.zettelkasten/db/zettelkasten.db

# Logging level (DEBUG, INFO, WARNING, ERROR)
ZETTELKASTEN_LOG_LEVEL=INFO

# Optional: Mirror notes to an Obsidian vault
# When set, notes are organized into project-based subdirectories:
#   <vault>/general/Note Title.md
#   <vault>/my-project/Another Note.md
#
# Use zk_sync_to_obsidian tool or ./scripts/sync-to-obsidian to bulk sync
# ZETTELKASTEN_OBSIDIAN_VAULT=/path/to/obsidian/vault/zettelkasten

# Git Versioning (for multi-process concurrency)
# When true, notes are version-controlled with git for conflict detection
# Each note update gets a commit hash that can be used to detect concurrent edits
ZETTELKASTEN_GIT_ENABLED=true

# In-Memory Database (recommended for multi-process environments)
# When true, each process uses its own in-memory SQLite database, eliminating
# database lock contention. The index is rebuilt from markdown files on startup.
# Set to false only if you need to share database state across processes.
ZETTELKASTEN_IN_MEMORY_DB=true

# Server name (used in MCP protocol handshake)
# ZETTELKASTEN_SERVER_NAME=znote-mcp

# =============================================================================
# Semantic Search / Embeddings (optional)
# =============================================================================
# Requires: pip install znote-mcp[semantic]
# When deps are installed, embeddings auto-enable on startup unless explicitly
# disabled here. Set to false to disable even when deps are available.
# ZETTELKASTEN_EMBEDDINGS_ENABLED=false

# Embedding model (HuggingFace model ID)
# ZETTELKASTEN_EMBEDDING_MODEL=Alibaba-NLP/gte-modernbert-base

# Reranker model for improving search result quality
# ZETTELKASTEN_RERANKER_MODEL=Alibaba-NLP/gte-reranker-modernbert-base

# Embedding vector dimension (must match the model's output dimension)
# ZETTELKASTEN_EMBEDDING_DIM=768

# Maximum token length for embedding input
# ZETTELKASTEN_EMBEDDING_MAX_TOKENS=8192

# Seconds before idle reranker model is unloaded to free memory (0 = never unload)
# ZETTELKASTEN_RERANKER_IDLE_TIMEOUT=600

# Batch size for embedding operations (reindex, bulk create)
# ZETTELKASTEN_EMBEDDING_BATCH_SIZE=32

# Custom directory for caching downloaded models (default: HuggingFace cache)
# ZETTELKASTEN_EMBEDDING_CACHE_DIR=/path/to/model/cache
